<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ConfigParser.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>ConfigParser.cpp</h1><a href="ConfigParser_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00013 <span class="preprocessor">#include "<a class="code" href="ConfigParser_8h.html">ConfigParser.h</a>"</span>
00014 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00015"></a><a class="code" href="classConfigParser.html#a0">00015</a> 
00016 <a class="code" href="classConfigParser.html#a0">ConfigParser::ConfigParser</a>()
00017 {
00018 
00019         <a class="code" href="classConfigParser.html#n0">m_buffer</a> = <span class="stringliteral">""</span>;
00020 
00021         <a class="code" href="classConfigParser.html#n1">m_pos</a> = 0;
00022 
00023         <a class="code" href="classConfigParser.html#n2">m_source</a> = <span class="stringliteral">""</span>;
00024         
00025 }
<a name="l00026"></a><a class="code" href="classConfigParser.html#a1">00026</a> 
00027 <a class="code" href="classConfigParser.html#a1">ConfigParser::~ConfigParser</a>()
00028 {
00029 
00030         <a class="code" href="classConfigParser.html#n0">m_buffer</a> = <span class="stringliteral">""</span>;
00031 
00032         <a class="code" href="classConfigParser.html#n0">m_buffer</a>.resize(0);
00033 
00034         <a class="code" href="classConfigParser.html#n1">m_pos</a> = 0;
00035 
00036         <a class="code" href="classConfigParser.html#n2">m_source</a> = <span class="stringliteral">""</span>;
00037 
00038         <a class="code" href="classConfigParser.html#n2">m_source</a>.resize(0);
00039 
00040 }
<a name="l00041"></a><a class="code" href="classConfigParser.html#a2">00041</a> 
00042 <span class="keywordtype">bool</span> <a class="code" href="classConfigParser.html#a2">ConfigParser::loadFile</a>(string file)
00043 {
00044 
00045         <span class="keywordtype">char</span> byte = 0;
00046 
00047         ifstream in(file.c_str(), ios::in);
00048         
00049         <span class="keywordflow">if</span>(!in)
00050         {
00051 
00052                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00053 
00054         }
00055 
00056         <a class="code" href="classConfigParser.html#n2">m_source</a> = <span class="stringliteral">""</span>;
00057 
00058         <span class="keywordflow">while</span>(!in.eof())
00059         {
00060 
00061                 <a class="code" href="classConfigParser.html#n2">m_source</a> += in.get();
00062 
00063         }
00064         
00065         <span class="keywordflow">if</span>(<a class="code" href="classConfigParser.html#n2">m_source</a>.size() &lt; 1)
00066         {
00067 
00068                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00069 
00070         }
00071 
00072         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00073 
00074 }
<a name="l00075"></a><a class="code" href="classConfigParser.html#b1">00075</a> 
00076 string <a class="code" href="classConfigParser.html#b1">ConfigParser::parseLine</a>()
00077 {
00078 
00079         <span class="keywordtype">bool</span> middleOfString = <span class="keyword">false</span>;
00080 
00081         <span class="keywordtype">char</span> *latest = <span class="keyword">new</span> <span class="keywordtype">char</span>[2];
00082 
00083         <span class="keywordtype">int</span> readCount = 0;
00084 
00085         <span class="keywordtype">bool</span> comment = <span class="keyword">false</span>;
00086 
00087         <a class="code" href="classConfigParser.html#n0">m_buffer</a> = <span class="stringliteral">""</span>;
00088 
00089         <span class="keywordflow">while</span>(true)
00090         {
00091         
00092                 <span class="keywordflow">if</span>(<a class="code" href="classConfigParser.html#n1">m_pos</a> &gt; <a class="code" href="classConfigParser.html#n2">m_source</a>.size() - 1)
00093                 {
00094                         
00095                         <span class="keywordflow">break</span>;
00096 
00097                 }
00098 
00099                 <span class="keyword">const</span> <span class="keywordtype">char</span> *ptr = <a class="code" href="classConfigParser.html#n2">m_source</a>.c_str();
00100 
00101                 <span class="comment">//ptr += m_pos;</span>
00102 
00103                 latest[0] = *(ptr + <a class="code" href="classConfigParser.html#n1">m_pos</a>);
00104                 latest[1] = <span class="charliteral">'\0'</span>;
00105 
00106                 <a class="code" href="classConfigParser.html#n1">m_pos</a>++;
00107 
00108                 <span class="keywordflow">if</span>(latest[0] == <span class="charliteral">'\0'</span>)
00109                 {
00110 
00111                         <span class="keywordflow">break</span>;
00112 
00113                 }
00114 
00115                 <span class="keywordflow">if</span>(latest[0] == <span class="charliteral">'\n'</span> &amp;&amp; !middleOfString &amp;&amp; comment == <span class="keyword">false</span>)
00116                 {
00117 
00118                         <span class="keywordflow">if</span>(readCount &gt; 0)
00119                         {
00120 
00121                         } <span class="keywordflow">else</span> {
00122 
00123                                 
00124 
00125                         }
00126 
00127                         <span class="keywordflow">break</span>;
00128 
00129                 }
00130 
00131                 <span class="keywordflow">if</span>(latest[0] == <span class="charliteral">'#'</span> &amp;&amp; readCount == 0)
00132                 {
00133 
00134                         comment = <span class="keyword">true</span>;
00135 
00136                 }
00137 
00138                 <span class="keywordflow">if</span>(latest[0] == <span class="charliteral">'\"'</span>)
00139                 {
00140 
00141                         middleOfString = !middleOfString;
00142 
00143                 }
00144 
00145                 <span class="keywordflow">if</span>(latest[0] != <span class="charliteral">' '</span> &amp;&amp; latest[0] != <span class="charliteral">'\n'</span>)
00146                 {
00147                         
00148                         <span class="keywordflow">if</span>(!comment)
00149                         {
00150 
00151                                 <a class="code" href="classConfigParser.html#n0">m_buffer</a>.append(latest);
00152 
00153                                 readCount++;
00154 
00155                         }
00156 
00157                 }
00158 
00159                 <span class="keywordflow">if</span>(latest[0] == <span class="charliteral">' '</span> &amp;&amp; middleOfString)
00160                 {
00161 
00162                         <span class="keywordflow">if</span>(!comment)
00163                         {
00164 
00165                                 <a class="code" href="classConfigParser.html#n0">m_buffer</a>.append(latest);
00166 
00167                                 readCount++;
00168 
00169                         }
00170 
00171                 }
00172                 
00173                 <span class="keywordflow">if</span>(comment &amp;&amp; latest[0] == <span class="charliteral">'\n'</span>)
00174                 {
00175                 
00176                         comment = <span class="keyword">false</span>;
00177 
00178                 }
00179 
00180         }
00181 
00182         <span class="keyword">delete</span> latest;
00183 
00184         <span class="keywordflow">return</span> <a class="code" href="classConfigParser.html#n0">m_buffer</a>;
00185 
00186 }
<a name="l00187"></a><a class="code" href="classConfigParser.html#a3">00187</a> 
00188 <span class="keywordtype">float</span> <a class="code" href="classConfigParser.html#a3">ConfigParser::readFloat</a>(string var, <span class="keywordtype">float</span> dflt)
00189 {
00190 
00191         string buffer;
00192         string left;
00193         string right;
00194 
00195         <span class="keywordtype">int</span> dir = 0;
00196 
00197         <span class="keywordtype">bool</span> isString = <span class="keyword">false</span>;
00198 
00199         <span class="keywordtype">bool</span> reachedEnd = <span class="keyword">false</span>;
00200 
00201         <span class="keywordtype">char</span> *tempchr = <span class="keyword">new</span> <span class="keywordtype">char</span>[2];
00202 
00203         <a class="code" href="classConfigParser.html#b3">removeBlanks</a>(&amp;var);
00204 
00205         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; var.length(); i++)
00206         {
00207 
00208                 var[i] = tolower(var[i]);
00209 
00210         }
00211 
00212         <a class="code" href="classConfigParser.html#n1">m_pos</a> = 0;
00213 
00214         buffer = <a class="code" href="classConfigParser.html#b1">parseLine</a>();
00215 
00216         <span class="keywordflow">while</span>(!reachedEnd)
00217         {
00218                 
00219                 <span class="keywordflow">if</span>(<a class="code" href="classConfigParser.html#n1">m_pos</a> &gt; <a class="code" href="classConfigParser.html#n2">m_source</a>.size() - 1)
00220                 {
00221 
00222                         reachedEnd = <span class="keyword">true</span>;
00223 
00224                 }
00225 
00226                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; buffer.length(); ++i)
00227                 {
00228 
00229                         <span class="keywordflow">if</span>(dir == 0)
00230                         {
00231 
00232                                 <span class="keywordflow">if</span>(buffer[i] != <span class="charliteral">'='</span>)
00233                                 {
00234                                 
00235                                         tempchr[0] = buffer[i];
00236                                         tempchr[1] = <span class="charliteral">'\0'</span>;
00237 
00238                                         left.append(tempchr);
00239 
00240 
00241                                 } <span class="keywordflow">else</span> {
00242 
00243                                         dir = 1;
00244 
00245                                 }
00246 
00247                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dir == 1)
00248                         {
00249                                 
00250                                 <span class="keywordflow">if</span>(buffer[i] != <span class="charliteral">'\"'</span>)
00251                                 {
00252                                 
00253                                         tempchr[0] = buffer[i];
00254                                         tempchr[1] = <span class="charliteral">'\0'</span>;
00255 
00256                                         right.append(tempchr);
00257 
00258                                 } <span class="keywordflow">else</span> {
00259 
00260                                         isString = <span class="keyword">true</span>;
00261 
00262                                 }
00263 
00264                         }
00265 
00266                 }
00267 
00268                 <span class="keywordflow">if</span>(!isString)
00269                 {
00270 
00271                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; left.length(); ++j)
00272                         {
00273 
00274                                 left[j] = tolower(left[j]);
00275 
00276                         }
00277 
00278                         <span class="keywordflow">if</span>(strcmp(left.c_str(), var.c_str()) == 0)
00279                         {
00280 
00281                                 <span class="keywordtype">float</span> out = 0;
00282 
00283                                 <span class="keywordflow">if</span>(<a class="code" href="classConfigParser.html#b0">parseFloat</a>(right, &amp;out))
00284                                 {
00285 
00286                                         <span class="keyword">delete</span> tempchr;
00287                         
00288                                         <span class="keywordflow">return</span> out;
00289 
00290                                 }
00291 
00292                         }
00293 
00294                 }
00295 
00296                 isString = <span class="keyword">false</span>;
00297 
00298                 left = <span class="stringliteral">""</span>;
00299                 right = <span class="stringliteral">""</span>;
00300 
00301                 dir = 0;
00302 
00303                 buffer = <a class="code" href="classConfigParser.html#b1">parseLine</a>();
00304 
00305         }
00306 
00307         <span class="keyword">delete</span> tempchr;
00308 
00309         <span class="keywordflow">return</span> dflt;
00310 
00311 }
<a name="l00312"></a><a class="code" href="classConfigParser.html#a5">00312</a> 
00313 string <a class="code" href="classConfigParser.html#a5">ConfigParser::readString</a>(string var, string dflt)
00314 {
00315 
00316         string buffer;
00317         string left;
00318         string right;
00319 
00320         <span class="keywordtype">int</span> dir = 0;
00321 
00322         <span class="keywordtype">bool</span> isString = <span class="keyword">false</span>;
00323 
00324         <span class="keywordtype">bool</span> reachedEnd = <span class="keyword">false</span>;
00325 
00326         <span class="keywordtype">char</span> *tempchr = <span class="keyword">new</span> <span class="keywordtype">char</span>[2];
00327 
00328         <a class="code" href="classConfigParser.html#b3">removeBlanks</a>(&amp;var);
00329 
00330         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; var.length(); ++i)
00331         {
00332 
00333                 var[i] = tolower(var[i]);
00334 
00335         }
00336 
00337         <a class="code" href="classConfigParser.html#n1">m_pos</a> = 0;
00338 
00339         buffer = <a class="code" href="classConfigParser.html#b1">parseLine</a>();
00340 
00341         <span class="keywordflow">while</span>(!reachedEnd)
00342         {
00343                 
00344                 <span class="keywordflow">if</span>(<a class="code" href="classConfigParser.html#n1">m_pos</a> &gt; <a class="code" href="classConfigParser.html#n2">m_source</a>.size() - 1)
00345                 {
00346 
00347                         reachedEnd = <span class="keyword">true</span>;
00348 
00349                 }
00350 
00351                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; buffer.length(); ++i)
00352                 {
00353 
00354                         <span class="keywordflow">if</span>(dir == 0)
00355                         {
00356 
00357                                 <span class="keywordflow">if</span>(buffer[i] != <span class="charliteral">'='</span>)
00358                                 {
00359                                 
00360                                         tempchr[0] = buffer[i];
00361                                         tempchr[1] = <span class="charliteral">'\0'</span>;
00362 
00363                                         left.append(tempchr);
00364 
00365 
00366                                 } <span class="keywordflow">else</span> {
00367 
00368                                         dir = 1;
00369 
00370                                 }
00371 
00372                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dir == 1)
00373                         {
00374                                 
00375                                 <span class="keywordflow">if</span>(buffer[i] != <span class="charliteral">'\"'</span>)
00376                                 {
00377                                 
00378                                         tempchr[0] = buffer[i];
00379                                         tempchr[1] = <span class="charliteral">'\0'</span>;
00380 
00381                                         right.append(tempchr);
00382 
00383                                 } <span class="keywordflow">else</span> {
00384 
00385                                         isString = <span class="keyword">true</span>;
00386 
00387                                 }
00388 
00389                         }
00390 
00391                 }
00392 
00393                 <span class="keywordflow">if</span>(isString)
00394                 {
00395 
00396                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; left.length(); ++j)
00397                         {
00398 
00399                                 left[j] = tolower(left[j]);
00400 
00401                         }
00402 
00403                         <span class="keywordflow">if</span>(strcmp(left.c_str(), var.c_str()) == 0)
00404                         {
00405 
00406                                 <span class="keyword">delete</span> tempchr;
00407                         
00408                                 <span class="keywordflow">return</span> right;
00409 
00410                         }
00411 
00412                 }
00413 
00414                 isString = <span class="keyword">false</span>;
00415 
00416                 left = <span class="stringliteral">""</span>;
00417                 right = <span class="stringliteral">""</span>;
00418 
00419                 dir = 0;
00420 
00421                 buffer = <a class="code" href="classConfigParser.html#b1">parseLine</a>();
00422 
00423         }
00424 
00425         <span class="keyword">delete</span> tempchr;
00426 
00427         <span class="keywordflow">return</span> dflt;
00428 
00429 }
<a name="l00430"></a><a class="code" href="classConfigParser.html#a4">00430</a> 
00431 <span class="keywordtype">long</span> <a class="code" href="classConfigParser.html#a4">ConfigParser::readLong</a>(string var, <span class="keywordtype">long</span> dflt)
00432 {
00433 
00434         string buffer;
00435         string left;
00436         string right;
00437 
00438         <span class="keywordtype">int</span> dir = 0;
00439 
00440         <span class="keywordtype">bool</span> isString = <span class="keyword">false</span>;
00441 
00442         <span class="keywordtype">bool</span> reachedEnd = <span class="keyword">false</span>;
00443 
00444         <span class="keywordtype">char</span> *tempchr = <span class="keyword">new</span> <span class="keywordtype">char</span>[2];
00445 
00446         <a class="code" href="classConfigParser.html#b3">removeBlanks</a>(&amp;var);
00447 
00448         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; var.length(); ++i)
00449         {
00450 
00451                 var[i] = tolower(var[i]);
00452 
00453         }
00454 
00455         <a class="code" href="classConfigParser.html#n1">m_pos</a> = 0;
00456 
00457         buffer = <a class="code" href="classConfigParser.html#b1">parseLine</a>();
00458 
00459         <span class="keywordflow">while</span>(!reachedEnd)
00460         {
00461 
00462                 <span class="keywordflow">if</span>(<a class="code" href="classConfigParser.html#n1">m_pos</a> &gt; <a class="code" href="classConfigParser.html#n2">m_source</a>.size() - 1)
00463                 {
00464 
00465                         reachedEnd = <span class="keyword">true</span>;
00466 
00467                 }
00468 
00469                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; buffer.length(); ++i)
00470                 {
00471 
00472                         <span class="keywordflow">if</span>(dir == 0)
00473                         {
00474 
00475                                 <span class="keywordflow">if</span>(buffer[i] != <span class="charliteral">'='</span>)
00476                                 {
00477                                 
00478                                         tempchr[0] = buffer[i];
00479                                         tempchr[1] = <span class="charliteral">'\0'</span>;
00480 
00481                                         left.append(tempchr);
00482 
00483 
00484                                 } <span class="keywordflow">else</span> {
00485 
00486                                         dir = 1;
00487 
00488                                 }
00489 
00490                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dir == 1)
00491                         {
00492                                 
00493                                 <span class="keywordflow">if</span>(buffer[i] != <span class="charliteral">'\"'</span>)
00494                                 {
00495                                 
00496                                         tempchr[0] = buffer[i];
00497                                         tempchr[1] = <span class="charliteral">'\0'</span>;
00498 
00499                                         right.append(tempchr);
00500 
00501                                 } <span class="keywordflow">else</span> {
00502 
00503                                         isString = <span class="keyword">true</span>;
00504 
00505                                 }
00506 
00507                         }
00508 
00509                 }
00510 
00511                 <span class="keywordflow">if</span>(!isString)
00512                 {
00513 
00514                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; left.length(); j++)
00515                         {
00516 
00517                                 left[j] = tolower(left[j]);
00518 
00519                         }
00520 
00521                         <span class="keywordflow">if</span>(strcmp(left.c_str(), var.c_str()) == 0)
00522                         {
00523 
00524                                 <span class="keywordtype">long</span> out = 0;
00525 
00526                                 <span class="keywordflow">if</span>(<a class="code" href="classConfigParser.html#b2">parseLong</a>(right, &amp;out))
00527                                 {
00528 
00529                                         <span class="keyword">delete</span> tempchr;
00530                         
00531                                         <span class="keywordflow">return</span> out;
00532 
00533                                 }
00534 
00535                         }
00536 
00537                 }
00538 
00539                 isString = <span class="keyword">false</span>;
00540 
00541                 left = <span class="stringliteral">""</span>;
00542                 right = <span class="stringliteral">""</span>;
00543 
00544                 dir = 0;
00545 
00546                 buffer = <a class="code" href="classConfigParser.html#b1">parseLine</a>();
00547 
00548         }
00549 
00550         <span class="keyword">delete</span> tempchr;
00551 
00552         <span class="keywordflow">return</span> dflt;
00553 
00554 }
<a name="l00555"></a><a class="code" href="classConfigParser.html#b0">00555</a> 
00556 <span class="keywordtype">bool</span> <a class="code" href="classConfigParser.html#b0">ConfigParser::parseFloat</a>(string str, <span class="keywordtype">float</span> *out)
00557 {
00558 
00559         <span class="keywordtype">bool</span> dec = <span class="keyword">false</span>;
00560         <span class="keywordtype">float</span> *f = out;
00561         <span class="keywordtype">int</span> afterdec = 0;
00562 
00563         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; str.length(); i++)
00564         {
00565 
00566                 <span class="keywordflow">if</span>(str[i] == <span class="charliteral">'.'</span>)
00567                 {
00568 
00569                         <span class="keywordflow">if</span>(dec)
00570                         {
00571 
00572                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00573 
00574                         }
00575 
00576                         dec = <span class="keyword">true</span>;
00577 
00578                 } <span class="keywordflow">else</span> {
00579 
00580                         <span class="keywordflow">if</span>(str[i] == <span class="charliteral">'0'</span> || str[i] == <span class="charliteral">'1'</span> || str[i] == <span class="charliteral">'2'</span> || str[i] == <span class="charliteral">'3'</span> || str[i] == <span class="charliteral">'4'</span> || str[i] == <span class="charliteral">'5'</span> || str[i] == <span class="charliteral">'6'</span> || str[i] == <span class="charliteral">'7'</span> || str[i] == <span class="charliteral">'8'</span> || str[i] == <span class="charliteral">'9'</span>)
00581                         {
00582 
00583                                 <span class="keywordtype">int</span> j = 0;
00584 
00585                                 <span class="keywordflow">switch</span>(str[i])
00586                                 {
00587 
00588                                 <span class="keywordflow">case</span> <span class="charliteral">'1'</span>:
00589                                         {
00590 
00591                                                 j = 1;
00592                                         
00593                                                 <span class="keywordflow">break</span>;
00594 
00595                                         }
00596                                 <span class="keywordflow">case</span> <span class="charliteral">'2'</span>:
00597                                         {
00598 
00599                                                 j = 2;
00600                                         
00601                                                 <span class="keywordflow">break</span>;
00602 
00603                                         }
00604                                 <span class="keywordflow">case</span> <span class="charliteral">'3'</span>:
00605                                         {
00606 
00607                                                 j = 3;
00608                                         
00609                                                 <span class="keywordflow">break</span>;
00610 
00611                                         }
00612                                 <span class="keywordflow">case</span> <span class="charliteral">'4'</span>:
00613                                         {
00614 
00615                                                 j = 4;
00616                                         
00617                                                 <span class="keywordflow">break</span>;
00618 
00619                                         }
00620                                 <span class="keywordflow">case</span> <span class="charliteral">'5'</span>:
00621                                         {
00622 
00623                                                 j = 5;
00624                                         
00625                                                 <span class="keywordflow">break</span>;
00626 
00627                                         }
00628                                 <span class="keywordflow">case</span> <span class="charliteral">'6'</span>:
00629                                         {
00630 
00631                                                 j = 6;
00632                                         
00633                                                 <span class="keywordflow">break</span>;
00634 
00635                                         }
00636                                 <span class="keywordflow">case</span> <span class="charliteral">'7'</span>:
00637                                         {
00638 
00639                                                 j = 7;
00640                                         
00641                                                 <span class="keywordflow">break</span>;
00642 
00643                                         }
00644                                 <span class="keywordflow">case</span> <span class="charliteral">'8'</span>:
00645                                         {
00646 
00647                                                 j = 8;
00648                                         
00649                                                 <span class="keywordflow">break</span>;
00650 
00651                                         }
00652                                 <span class="keywordflow">case</span> <span class="charliteral">'9'</span>:
00653                                         {
00654 
00655                                                 j = 9;
00656                                         
00657                                                 <span class="keywordflow">break</span>;
00658 
00659                                         }
00660                                 <span class="keywordflow">case</span> <span class="charliteral">'0'</span>:
00661                                         {
00662 
00663                                                 j = 0;
00664                                         
00665                                                 <span class="keywordflow">break</span>;
00666 
00667                                         }
00668 
00669                                 }
00670 
00671                                 <span class="keywordflow">if</span>(dec)
00672                                 {
00673 
00674                                         afterdec++;
00675 
00676                                         *f += (j * (1.0f / (pow(10, afterdec))));
00677 
00678                                 } <span class="keywordflow">else</span> {
00679 
00680                                         *f *= 10;
00681                                 
00682                                         *f += (j);
00683 
00684                                 }
00685 
00686                         }
00687 
00688                 }
00689 
00690         }
00691 
00692         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00693 
00694 }
<a name="l00695"></a><a class="code" href="classConfigParser.html#b2">00695</a> 
00696 <span class="keywordtype">bool</span> <a class="code" href="classConfigParser.html#b2">ConfigParser::parseLong</a>(string str, <span class="keywordtype">long</span> *out)
00697 {
00698 
00699         <span class="keywordtype">bool</span> dec = <span class="keyword">false</span>;
00700         <span class="keywordtype">long</span> *l = out;
00701         <span class="keywordtype">int</span> afterdec = 0;
00702 
00703         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; str.length(); i++)
00704         {
00705 
00706                 <span class="keywordflow">if</span>(str[i] == <span class="charliteral">'.'</span>)
00707                 {
00708 
00709                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00710 
00711                 } <span class="keywordflow">else</span> {
00712 
00713                         <span class="keywordflow">if</span>(str[i] == <span class="charliteral">'0'</span> || str[i] == <span class="charliteral">'1'</span> || str[i] == <span class="charliteral">'2'</span> || str[i] == <span class="charliteral">'3'</span> || str[i] == <span class="charliteral">'4'</span> || str[i] == <span class="charliteral">'5'</span> || str[i] == <span class="charliteral">'6'</span> || str[i] == <span class="charliteral">'7'</span> || str[i] == <span class="charliteral">'8'</span> || str[i] == <span class="charliteral">'9'</span>)
00714                         {
00715 
00716                                 <span class="keywordtype">int</span> j = 0;
00717 
00718                                 <span class="keywordflow">switch</span>(str[i])
00719                                 {
00720 
00721                                 <span class="keywordflow">case</span> <span class="charliteral">'1'</span>:
00722                                         {
00723 
00724                                                 j = 1;
00725                                         
00726                                                 <span class="keywordflow">break</span>;
00727 
00728                                         }
00729                                 <span class="keywordflow">case</span> <span class="charliteral">'2'</span>:
00730                                         {
00731 
00732                                                 j = 2;
00733                                         
00734                                                 <span class="keywordflow">break</span>;
00735 
00736                                         }
00737                                 <span class="keywordflow">case</span> <span class="charliteral">'3'</span>:
00738                                         {
00739 
00740                                                 j = 3;
00741                                         
00742                                                 <span class="keywordflow">break</span>;
00743 
00744                                         }
00745                                 <span class="keywordflow">case</span> <span class="charliteral">'4'</span>:
00746                                         {
00747 
00748                                                 j = 4;
00749                                         
00750                                                 <span class="keywordflow">break</span>;
00751 
00752                                         }
00753                                 <span class="keywordflow">case</span> <span class="charliteral">'5'</span>:
00754                                         {
00755 
00756                                                 j = 5;
00757                                         
00758                                                 <span class="keywordflow">break</span>;
00759 
00760                                         }
00761                                 <span class="keywordflow">case</span> <span class="charliteral">'6'</span>:
00762                                         {
00763 
00764                                                 j = 6;
00765                                         
00766                                                 <span class="keywordflow">break</span>;
00767 
00768                                         }
00769                                 <span class="keywordflow">case</span> <span class="charliteral">'7'</span>:
00770                                         {
00771 
00772                                                 j = 7;
00773                                         
00774                                                 <span class="keywordflow">break</span>;
00775 
00776                                         }
00777                                 <span class="keywordflow">case</span> <span class="charliteral">'8'</span>:
00778                                         {
00779 
00780                                                 j = 8;
00781                                         
00782                                                 <span class="keywordflow">break</span>;
00783 
00784                                         }
00785                                 <span class="keywordflow">case</span> <span class="charliteral">'9'</span>:
00786                                         {
00787 
00788                                                 j = 9;
00789                                         
00790                                                 <span class="keywordflow">break</span>;
00791 
00792                                         }
00793                                 <span class="keywordflow">case</span> <span class="charliteral">'0'</span>:
00794                                         {
00795 
00796                                                 j = 0;
00797                                         
00798                                                 <span class="keywordflow">break</span>;
00799 
00800                                         }
00801 
00802                                 }
00803 
00804                                 *l *= 10;
00805                                 
00806                                 *l += (j);
00807 
00808                         }
00809 
00810                 }
00811 
00812         }
00813 
00814         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00815 
<a name="l00816"></a><a class="code" href="classConfigParser.html#b3">00816</a> }
00817 <span class="keywordtype">void</span> <a class="code" href="classConfigParser.html#b3">ConfigParser::removeBlanks</a>(string *str)
00818 {
00819 
00820         string tmpstr = <span class="stringliteral">""</span>;
00821 
00822         string tmp = *str;
00823 
00824         <span class="keywordtype">char</span> *latest = <span class="keyword">new</span> <span class="keywordtype">char</span>[2];
00825 
00826         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; tmp.length(); i++)
00827         {
00828 
00829                 <span class="keywordflow">if</span>(tmp[i] != <span class="charliteral">' '</span>)
00830                 {
00831 
00832                         latest[0] = tmp[i];
00833                         latest[1] = <span class="charliteral">'\0'</span>;
00834 
00835                         tmpstr.append(latest);
00836 
00837                 }
00838 
00839         }
00840 
00841         *str = tmpstr;
00842 
00843 }
</pre></div><hr><address style="align: right;"><small>Generated on Wed Jan 8 19:41:41 2003 for Swift blocks by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc1 </small></address>
</body>
</html>
